echo "ğŸ” Validating commit message..."

# Check if commitlint is available
if ! command -v npx >/dev/null 2>&1; then
  echo "âš ï¸  npx not available - skipping commit message validation"
  exit 0
fi

# Always try validation first, but be lenient for Cursor's Git tab
echo "ğŸ‘¤ Validating commit message..."
if ! npx --no -- commitlint --edit "$1" 2>/dev/null; then
  echo "âš ï¸  Commit message doesn't follow conventional format"
  echo "ğŸ’¡ This is allowed for Cursor's Git tab, but consider using conventional format: 'type(scope): description'"
  echo "ğŸ’¡ Examples: 'feat: add new feature', 'fix: resolve bug', 'docs: update readme'"
  echo "âœ… Allowing commit to proceed..."
  exit 0
fi

echo "âœ… Commit message validation passed!"
