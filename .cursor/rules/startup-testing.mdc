---
description: Startup Testing - Focus on Real User Value
globs: ["**/*.test.*", "**/*.spec.*", "**/tests/**/*"]
alwaysApply: false
---

# Startup Testing Philosophy

## Core Principle: Test What Users Actually Use

### ✅ DO Test

- **Core User Flows**: Robot simulation, parameter adjustment, preset saving
- **Critical API Endpoints**: PCC computation, tendon calculations
- **User Authentication**: Login/logout functionality
- **Real Bugs**: Test scenarios that have actually broken in production

### ❌ DON'T Test

- **Edge Cases**: Theoretical scenarios users never encounter
- **Internal Implementation**: Test behavior, not implementation details
- **Perfect Coverage**: 100% coverage is enterprise bureaucracy
- **Mock Everything**: Use real dependencies when possible

## Simplified Test Structure

### Backend: Focus on Core APIs

```python
# test_core_apis.py - Only test what users actually call
def test_pcc_computation():
    """Test core PCC computation that users rely on."""
    response = client.post("/pcc", json=valid_robot_params)
    assert response.status_code == 200
    assert "segments" in response.json()["data"]

def test_tendon_calculation():
    """Test tendon calculation that users need."""
    response = client.post("/tendons/calculate", json=valid_tendon_params)
    assert response.status_code == 200
    assert "actuation_commands" in response.json()["data"]
```

### Frontend: Focus on User Interactions

```tsx
// App.test.tsx - Test what users actually do
describe("Core User Flows", () => {
  it("allows user to adjust robot parameters", () => {
    render(<App />);
    // Test the actual user workflow
    fireEvent.change(screen.getByLabelText("Bending Angle"), {
      target: { value: "0.5" },
    });
    expect(screen.getByText("Robot updated")).toBeInTheDocument();
  });
});
```

## Test Organization

```bash
tests/
├── core_apis.py        # Only critical API endpoints
├── user_flows.py       # Only main user journeys
└── real_bugs.py        # Only tests for bugs that actually happened
```

## Anti-Patterns to Avoid

- **Over-Mocking**: Mock only external APIs, use real internal code
- **Perfect Coverage**: Aim for 60-70% coverage of critical paths
- **Theoretical Tests**: Test real user scenarios, not edge cases
- **Complex Fixtures**: Keep test data simple and realistic
