name: Quick Test

on:
    workflow_dispatch:
    push:
        branches: [main, develop, web-app-deployment]

env:
    BUN_VERSION: "latest"
    PYTHON_VERSION: "3.11"

jobs:
    quick-check:
        name: Quick Health Check
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v5

            - name: Setup Bun
              uses: oven-sh/setup-bun@v2
              with:
                  bun-version: ${{ env.BUN_VERSION }}

            - name: Setup Python
              uses: actions/setup-python@v6
              with:
                  python-version: ${{ env.PYTHON_VERSION }}

            - name: Install uv
              uses: astral-sh/setup-uv@v7
              with:
                  version: "latest"

            - name: Install frontend dependencies
              run: |
                  cd frontend
                  bun install

            - name: Install backend dependencies
              run: |
                  cd backend
                  uv sync

            - name: Quick linting check
              run: |
                  cd frontend && bun run lint:check
                  cd ../backend && uv run ruff check app/ --quiet

            - name: Quick build test
              run: |
                  cd frontend
                  bun run build

            - name: Backend import test
              run: |
                  cd backend
                  uv run python -c "import app.main; print('âœ… Backend imports successful')"

            - name: Success message
              run: |
                  echo "ðŸŽ‰ Quick test completed successfully!"
                  echo "âœ… Frontend builds"
                  echo "âœ… Backend imports"
                  echo "âœ… Linting passes"
